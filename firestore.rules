rules_version = '2';
service cloud.firestore {
  match /databases/{database}/documents {
    // DEVELOPMENT MODE: Allow full access for testing
    // Remove this rule in production!
    match /bookings/{bookingId} {
      allow read, write: if true;
    }
    
    // PRODUCTION RULES (uncomment these before deploying):
    // match /bookings/{bookingId} {
    //   // Faculty users can read and write bookings with proper email domain
    //   allow read, write: if request.auth != null && 
    //                      request.auth.token.email.matches('.*@hyderabad.bits-pilani.ac.in');
    //   
    //   // Students can only read their own bookings
    //   allow read: if request.auth != null && 
    //              request.auth.token.email == resource.data.studentEmail;
    //   
    //   // Students can create bookings if email matches domain
    //   allow create: if request.auth != null && 
    //               request.auth.token.email.matches('.*@hyderabad.bits-pilani.ac.in') &&
    //               request.resource.data.studentEmail == request.auth.token.email;
    // }
  }
}
